:javascript
  $(document).ready(function(){
    YmContent.ContentTypes.init()
  });
=render("content_packages/sitemap_header")
.tab-content.tab-content-sitemap
  #content-types.tab-pane.active.sitemap
    %table.table.table-content-types
      %thead
        %tr
          %th.col-md-10{:colspan => 4} Content type / Name
      %tbody
        -@content_types.each do |content_type|
          %tr.content-type{:id => "content-type-#{content_type.id}", :class => "#{'has-children' unless content_type.content_packages.count.zero?}", :data => {:depth => 0}}
            %td.td-name.col-md-10
              .name
                -unless content_type.content_packages.count.zero?
                  %i.fa.fa-caret-right.sitemap-caret
                =content_type.to_s.pluralize
                %span.text-muted
                  =pluralize(content_type.content_packages.count, 'page')
                =needs_design(content_type)
            %td
            %td
              =link_to('Edit', edit_content_type_path(content_type))
            %td
              .dropdown
                =link_to('More&hellip;'.html_safe, '#', 'data-toggle' => 'dropdown')
                %ul.dropdown-menu
                  %li=link_to("Add new content of this type", new_content_type_content_package_path(content_type))
                  %li=link_to('Reorder content attributes', reorder_content_type_path(content_type))
                  -if content_type.destroyable?
                    %li=link_to('Delete this content type', content_type_path(content_type), :method => :delete, :confirm => "Are you sure you want to delete this content type? This cannot be undone.")
        %tr
          %td{:colspan => 7}
            =link_if_can("Add new content type", [:new, ContentType.new], :icon => 'plus')